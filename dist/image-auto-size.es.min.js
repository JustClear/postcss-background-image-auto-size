import t from"path";import e from"image-size";import{plugin as n}from"postcss";var r=function(t){return/background[^:]*.*url[^;]+/gi.test(t)},i=function(t){return/^http[s]?/gi.test(t)},o=function(t){return/^data\:image/gi.test(t)};function u(t){var e=/url(?:\(['"]?)(.*?)(?:['"]?\))/gi.exec(t),n=e?e[1]:"",r=e?n.replace(/['"]/gi,"").replace(/\?.*$/gi,""):"";return[n,r]}var a=n("image-auto-size",(function(){return function(n){n.walkComments((function(t){return t.remove()}));var a=function(e){var n=[];return e.walkRules((function(a){var l,p=e.source.input.file,c=a.toString(),f={type:null,path:null,URL:null,originURL:null};if(r(c)){var g=u(c),s=g[0],m=g[1];f.type=i(l=m)?"online":o(l)?"base64":"unsupported",f.URL=m,f.originURL=s,!function(t){return function(t){return["./","../","/"].map((function(e){return 0==t.indexOf(e)})).includes(!0)}(t)||i(t)||o(t)}(f.URL)?console.log("image not supported"):(f.path=t.resolve(t.dirname(p),f.URL),n.push(f))}})),n}(n);n.walkDecls(/^background(-image)?$/,(function(t){var n=t.parent.toString();if(!r(n))return!1;var i=u(n)[1],o=function(t,e){return t.filter((function(t){return t.URL==e}))[0]}(a,i);if(!o)return!1;if("online"==o.type)return console.log("online image not supported for the time being");var l=e(o.path),p=l.width,c=l.height;t.cloneAfter({type:"decl",prop:"width",value:p+"px"}).cloneAfter({type:"decl",prop:"height",value:c+"px"})}))}}));export default a;
//# sourceMappingURL=image-auto-size.es.min.js.map
